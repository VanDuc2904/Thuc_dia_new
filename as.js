const tests = {
    test7: {
        questions: [
            { question: "Where does she walk every night?", options: ["The university area", "The park", "The college"], answer: "The college" },
            { question: "How many chairs do they need to prepare for a meeting?", options: ["10", "20", "30"], answer: "20" },
            { question: "Where did she ask the coffee shop to look for her lost item?", options: ["On the sofa", "In the corner", "On the table"], answer: "In the corner" },
            { question: "Where did they meet?", options: ["The parking lot", "The front entrance", "The school gate"], answer: "The front entrance" },
            { question: "The daughter is calling her father. What did she buy?", options: ["Trousers", "A dress", "Glasses"], answer: "A dress" },
            { question: "There will be a school party soon, what should the teacher prepare?", options: ["Prepare drinks", "Arrange the seat", "Order the food"], answer: "Order the food" },
            { question: "When will she need a computer?", options: ["Friday", "Thursday", "Monday"], answer: "Friday" },
            { question: "What country will they study next semester?", options: ["France", "Italy", "Germany"], answer: "France" },
            { question: "What do they need to repair for the building?", options: ["Windows", "Doors", "Gate"], answer: "Windows" },
            { question: "What does the actor like to do?", options: ["Jogging", "Swimming", "Drawing"], answer: "Drawing" },
            { question: "What new thing is being built at the school?", options: ["A stadium", "A Performance space", "A school yard"], answer: "A Performance space" },
            { question: "What does he like about Dubai?", options: ["He gets a higher salary", "He enjoys the weather here", "He enjoys his job here"], answer: "He enjoys his job here" },
            { question: "What does he advice young people to do to save money?", options: ["Cook for yourself", "Save money", "Buy things online"], answer: "Cook for yourself" }
        ],
    },
    test3: {
        questions: [
            { question: "What time will they meet?", options: ["Half past eight", "Quarter to seven", "Quarter to eight"], answer: "Quarter to eight" },
            { question: "Where did they meet for the bus home?", options: ["Hotel entrance", "Bus station", "Market place"], answer: "Market place" },
            { question: "How old is Stephanie?", options: ["21", "22", "23"], answer: "21" },
            { question: "Where is the club near?", options: ["A park", "A library", "A coffee shop"], answer: "A park" },
            { question: "What to feed the cat?", options: ["Milk", "Fish", "Cat food"], answer: "Fish" },
            { question: "What does this family do most weekends?", options: ["Goes with their friends", "Goes bowling", "Goes for a walk"], answer: "Goes for a walk" },
            { question: "What does he need to buy for his sister?", options: ["Chocolates", "Eggs", "Milk"], answer: "Chocolates" },
            { question: "The train was delayed. What time does the train leave?", options: ["8.45", "9.15", "9.30"], answer: "9.30" },
            { question: "Which area has the best weather?", options: ["In the south", "In the east", "In the west"], answer: "In the east" },
            { question: "Why was the museum visit cancelled?", options: ["Join other activities", "Poor weather conditions", "Not enough people"], answer: "Not enough people" },
            { question: "Where is the cafe?", options: ["Next to the station", "Near the gift shop", "Opposite the gift shop"], answer: "Opposite the gift shop" },
            { question: "Where is the tea served?", options: ["The building", "The river boat", "The museum"], answer: "The river boat" },
            { question: "Which room is the largest in her house?", options: ["Living room", "Bedroom", "Kitchen"], answer: "Kitchen" }
        ],
    },
    test4: {
        questions: [
            { question: "What time is the meeting?", options: ["9.15", "10.15", "10.30"], answer: "10.15" },
            { question: "Why did he call his friend?", options: ["To make an appointment", "To say hello", "Suggest a drink"], answer: "Suggest a drink" },
            { question: "How does he feel?", options: ["Sick", "Sad", "Well"], answer: "Sick" },
            { question: "What is the mother asking her daughter to buy?", options: ["Eggs", "Chocolates", "Bread"], answer: "Eggs" },
            { question: "When do they meet?", options: ["8.00", "9.00", "10.00"], answer: "10.00" },
            { question: "Why can't she pick up her child?", options: ["Meet her client", "Have an urgent meeting", "Stay late at the office"], answer: "Stay late at the office" },
            { question: "What movie does she recommend?", options: ["Comedy film", "Action film", "Horror film"], answer: "Action film" },
            { question: "A man is calling his friend. Where is he?", options: ["The park", "The station", "The town hall"], answer: "The town hall" },
            { question: "What means of transport does he use to get to work?", options: ["By bus", "By train", "By car"], answer: "By bus" },
            { question: "What time do experts recommend eating fruit?", options: ["In the morning", "In the afternoon", "In the evening"], answer: "In the morning" },
            { question: "Why does she wake up early?", options: ["To exercise", "To have some quiet time", "To do housework"], answer: "To have some quiet time" },
            { question: "Why is he learning to drive?", options: ["Driving a car is his dream", "He hates public transport", "He has to drive to work"], answer: "He has to drive to work" },
            { question: "What does he buy directly at the shop?", options: ["Books", "Clothes", "Trousers"], answer: "Clothes" }
        ],
    },
    test10: {
        questions: [
            { question: "Why did he call his friend?", options: ["To make an appointment", "To say hello", "Suggest a drink"], answer: "Suggest a drink" },
            { question: "When did they decide to meet?", options: ["7am on Friday", "9am on Sunday", "9am on Saturday"], answer: "9am on Sunday" },
            { question: "A girl is calling her mother. Which dress does she want?", options: ["Long and green", "Long and red", "Short and red"], answer: "Long and red" },
            { question: "What day is the new appointment?", options: ["Thursday 13th", "Tuesday 13th", "Wednesday 10th"], answer: "Thursday 13th" },
            { question: "A man is calling his wife. Where did they meet?", options: ["At the park", "At the station", "Outside a shop"], answer: "Outside a shop" },
            { question: "What did she do last weekend?", options: ["Stayed at home", "Went shopping", "Went to the cinema"], answer: "Stayed at home" },
            { question: "How many weeks have they been in India?", options: ["1 week", "2 weeks", "3 weeks"], answer: "2 weeks" },
            { question: "Where is the office?", options: ["Opposite the hotel", "Near the park", "Opposite the station"], answer: "Opposite the hotel" },
            { question: "Where do they wait for the bus?", options: ["Next to the hotel", "Near the hotel's main entrance", "By the hotel’s main entrance"], answer: "By the hotel’s main entrance" },
            { question: "What does his wife like to do?", options: ["Sightseeing", "Going shopping", "Photography"], answer: "Photography" },
            { question: "What outdoor activities do they do in the afternoon?", options: ["Play golf", "Go to dance classes", "Play bridge"], answer: "Play golf" },
            { question: "The concert will end with?", options: ["A surprise performance", "Some special offers", "The city’s favorite group"], answer: "The city’s favorite group" },
            { question: "What was the writer's first job?", options: ["Cook", "Reporter", "Teacher"], answer: "Teacher" }
        ],
    },
    test13: {
        questions: [
            { question: "How much are the eggs?", options: ["1.25 pound", "1.50 pound", "2 pounds"], answer: "1.50 pound" },
            { question: "What time does the train leave?", options: ["9.45", "8.45", "9.15"], answer: "9.15" },
            { question: "How does she go to school?", options: ["She walks", "She drives", "She goes by bus"], answer: "She walks" },
            { question: "What time is lunch ready?", options: ["1pm", "2pm", "3pm"], answer: "2pm" },
            { question: "What does she usually do in the evening?", options: ["Listen to music", "Go for a walk", "Go to the coffee shop"], answer: "Go for a walk" },
            { question: "Where will they meet?", options: ["At the university", "At the station", "At the park"], answer: "At the park" },
            { question: "What does this family do most weekends?", options: ["Goes with their friends", "Goes bowling", "Goes for a walk"], answer: "Goes for a walk" },
            { question: "What day do they meet?", options: ["Tuesday", "Thursday", "Friday"], answer: "Tuesday" },
            { question: "What career did he choose?", options: ["To work in business", "To be a teacher", "To keep studying"], answer: "To work in business" },
            { question: "What course did he take?", options: ["Management", "Computer", "Leadership"], answer: "Computer" }
        ],
    },
    test9: {
        questions: [
            { question: "How does he feel?", options: ["Sick", "Sad", "Well"], answer: "Sick" },
            { question: "How long does it take to get to the station?", options: ["15 minutes", "20 minutes", "25 minutes"], answer: "20 minutes" },
            { question: "What did he call to say?", options: ["To say hello", "To meet Felix", "To say thank you"], answer: "To say thank you" },
            { question: "Who is coming to visit him this weekend?", options: ["His mother", "His sister", "His sister and her children"], answer: "His sister and her children" },
            { question: "What time is the meeting?", options: ["2pm", "10am", "11am"], answer: "2pm" },
            { question: "Why can't she pick up her child?", options: ["Meet her client", "Have an urgent meeting", "Stay late at the office"], answer: "Stay late at the office" },
            { question: "How much do the cleaning products cost?", options: ["One pound fifty", "Two pounds", "One pence"], answer: "One pound fifty" },
            { question: "Where is she going with her family?", options: ["The mountains", "The lake", "The park"], answer: "The mountains" },
            { question: "What did he usually do last year?", options: ["Running", "Cycling", "Walking"], answer: "Cycling" },
            { question: "How many minutes did he have to speak?", options: ["10", "15", "25"], answer: "15" },
            { question: "Who does she live with?", options: ["Her colleague", "Her sister", "Best friends"], answer: "Best friends" },
            { question: "Why does she want to be a writer?", options: ["Help people", "Make money", "Her dream"], answer: "Help people" },
            { question: "Why was the flight canceled?", options: ["There are no flight staff", "Plane maintenance", "Poor weather conditions"], answer: "Poor weather conditions" }
        ],
    },
    test8: {
        questions: [
            { question: "Which room will they study in?", options: ["Room 201", "Room 301", "Room 302"], answer: "Room 301" },
            { question: "What time is the football match?", options: ["1pm", "7pm", "4pm"], answer: "1pm" },
            { question: "What is the phone number of the shop?", options: ["20 10 30", "10 20 30", "30 10 20"], answer: "20 10 30" },
            { question: "What did they bring for the picnic?", options: ["Clothes", "Fruit", "Food"], answer: "Food" },
            { question: "How many copies did he sell?", options: ["Over 300000 copies", "100.000 copies", "30.000 copies"], answer: "Over 300000 copies" },
            { question: "Where did they go last year?", options: ["Camping", "Cycling", "Bowling"], answer: "Camping" },
            { question: "What do they plan to do together?", options: ["Go to the coffee shop", "Make plans later", "Have dinner together"], answer: "Make plans later" },
            { question: "What does the man drink?", options: ["Water and iced tea", "Water", "Iced tea"], answer: "Iced tea" },
            { question: "Who did she take the picture of?", options: ["The girl's team", "The boy’s team", "Anna, Sara and the girl's team"], answer: "The girl's team" },
            { question: "Where do they go when they travel to India?", options: ["Go to the park", "Go to famous places", "Go out to eat"], answer: "Go to the park" },
            { question: "What is the weather like today?", options: ["Cold and not wet", "Hot and wet", "Cold and wet"], answer: "Cold and wet" },
            { question: "How did he adjust the meeting?", options: ["Cancel the meeting", "Having the meeting without him", "Having the meeting another day"], answer: "Having the meeting without him" },
            { question: "Which door do they need to take to get to Edinburgh?", options: ["Two", "Three", "Four"], answer: "Two" }
        ],
    },
    test12: {
        questions: [
            { question: "When do they meet each other?", options: ["On Thursday morning", "On Wednesday morning", "On Tuesday morning"], answer: "On Thursday morning" },
            { question: "How old is this city?", options: ["150 years", "1500 years", "2000 years"], answer: "1500 years" },
            { question: "What colour is Jack's house?", options: ["Red", "Black", "Green"], answer: "Red" },
            { question: "What does her sister look like?", options: ["Short", "Tall", "Thin"], answer: "Short" },
            { question: "What did he usually do last year?", options: ["Running", "Cycling", "Walking"], answer: "Cycling" },
            { question: "How does he travel?", options: ["By train", "By car", "By bus"], answer: "By train" },
            { question: "How long does it take her to ride her bike?", options: ["35 minutes", "25 minutes", "20 minutes"], answer: "35 minutes" },
            { question: "What does she usually do in her free time?", options: ["Go to the theatre and play sports", "Play sports and go shopping", "Stay at home and shop online"], answer: "Go to the theatre and play sports" },
            { question: "Which sports is she good at?", options: ["Running", "Swimming", "Football"], answer: "Football" },
            { question: "What are the similarities between his mom and aunt?", options: ["They were thin", "They have the same eye color", "They have the same hair color"], answer: "They were thin" },
            { question: "What time does she usually write?", options: ["In the evenings", "In the afternoons", "In the mornings"], answer: "In the afternoons" },
            { question: "What did she advice for people who lack motivation at work?", options: ["Quit the job", "Ask for a salary increase", "Request a transfer"], answer: "Request a transfer" }
        ],
    
    },
    test11: {
        questions: [
            { question: "What does her sister drink?", options: ["Water", "Tea", "Coffee"], answer: "Tea" },
            { question: "What is the population of this village?", options: ["10.000", "2.000", "5.000"], answer: "10.000" },
            { question: "Where does he want to go tomorrow?", options: ["The town hall", "The city center", "The museum"], answer: "The town hall" },
            { question: "What floor is the office on?", options: ["On the first floor", "On the second floor", "On the third floor"], answer: "On the first floor" },
            { question: "When can they play football at school?", options: ["Friday afternoon", "Wednesday afternoon", "Thursday afternoon"], answer: "Wednesday afternoon" },
            { question: "Where is the office?", options: ["Opposite the hotel", "Near the park", "Opposite the station"], answer: "Opposite the hotel" },
            { question: "A man is calling his wife. Where did they meet?", options: ["At the park", "At the station", "Outside a shop"], answer: "Outside a shop" },
            { question: "What time do he have dinner these days?", options: ["6 o'clock", "7 o'clock", "8 o'clock"], answer: "7 o'clock" },
            { question: "What does he do after work?", options: ["Go to the coffee shop", "Play football", "Go home"], answer: "Play football" },
            { question: "What did they both like about the movie?", options: ["The characters", "The ending", "The plot"], answer: "The ending" },
            { question: "What area is he describing?", options: ["A university area", "A park", "A library"], answer: "A university area" },
            { question: "A man wants to buy a new house. What is his biggest problem?", options: ["Choosing the proper area", "Financial problems", "Persuading his family"], answer: "Persuading his family" }
        ],
    },
    test5: {
        questions: [
            { question: "How much did he pay for the computer?", options: ["350 pounds", "150 pounds", "250 pounds"], answer: "250 pounds" },
            { question: "What did they bring for the picnic?", options: ["Clothes", "Fruit", "Food"], answer: "Food" },
            { question: "What colour is the teacher's house?", options: ["Blue", "Red", "White"], answer: "White" },
            { question: "What time is the football match?", options: ["1pm", "7pm", "4pm"], answer: "1pm" },
            { question: "What does she do on her holidays?", options: ["Drawing", "Walking", "Cooking"], answer: "Walking" },
            { question: "Why does she like the manager?", options: ["He was good at his job", "He paid her a lot", "He taught her a lot"], answer: "He taught her a lot" },
            { question: "What does he want to be?", options: ["Reporter", "Chef", "Writer"], answer: "Writer" },
            { question: "What does he drink?", options: ["Tea", "Juice", "Water"], answer: "Water" },
            { question: "What does he remember most about his school days?", options: ["Homework", "History classes", "Teachers"], answer: "History classes" },
            { question: "What will she do?", options: ["Go to the coffee shop", "Go for a drive", "Go on a picnic"], answer: "Go for a drive" },
            { question: "What does she have in common with her mother?", options: ["They look like each other", "They have similar interests", "They have similar characteristics"], answer: "They have similar interests" },
            { question: "What does he buy at the shop?", options: ["A suit for the office", "A dress for his wife", "New clothes"], answer: "A suit for the office" },
            { question: "What do birds do in winter?", options: ["They look for food reserves", "They stay in groups for protection", "They migrate to other regions"], answer: "They stay in groups for protection" }
        ],
    },
    test6: {
        questions: [
            { question: "Why did he call his friend?", options: ["To make an appointment", "To say hello", "Suggest a drink"], answer: "Suggest a drink" },
            { question: "How much does the smallest car cost?", options: ["1250 pounds", "2250 pounds", "3250 pounds"], answer: "3250 pounds" },
            { question: "A woman is calling her friend. What did she lose?", options: ["Phone", "Bag", "Key"], answer: "Phone" },
            { question: "What did he forget?", options: ["Money", "Phone", "Glasses"], answer: "Glasses" },
            { question: "How many Americans are there?", options: ["One", "Two", "Three"], answer: "One" },
            { question: "Which room is her favourite?", options: ["Bathroom", "Kitchen", "Bedroom"], answer: "Bathroom" },
            { question: "Where did they go last year?", options: ["Camping", "Cycling", "Bowling"], answer: "Camping" },
            { question: "What subject does her son like to study?", options: ["Science", "Art", "Math"], answer: "Art" },
            { question: "What does she usually do in her free time?", options: ["Go to the theatre and play sports", "Play sports and go shopping", "Stay at home and shop online"], answer: "Go to the theatre and play sports" },
            { question: "What advice do they need for decorating their living room?", options: ["How to buy a sofa", "Where to buy cups", "Where to buy a new table"], answer: "Where to buy a new table" },
            { question: "What is his opinion on train travel?", options: ["Convenient", "Friendly", "Practical"], answer: "Practical" },
            { question: "What is not original?", options: ["Furniture", "Door", "Window"], answer: "Furniture" },
            { question: "What number do you press to buy a new computer?", options: ["Two", "Three", "Four"], answer: "Three" }
        ],
        
    },
};
let currentTest = [];
let answers = [];

function generateTest() {
    const allQuestions = getAllQuestions();
    currentTest = getRandomQuestions(allQuestions, 30); // Generate 30 random questions
    answers = new Array(currentTest.length).fill(null); // Initialize answers as null

    renderQuestions();
}

function getAllQuestions() {
    const allQuestions = [];
    for (let test in tests) {
        if (tests.hasOwnProperty(test)) {
            allQuestions.push(...tests[test].questions);
        }
    }
    return allQuestions;
}

function getRandomQuestions(allQuestions, numberOfQuestions) {
    const shuffledQuestions = allQuestions.sort(() => 0.5 - Math.random());
    return shuffledQuestions.slice(0, numberOfQuestions);
}

function renderQuestions() {
    const questionsContainer = document.getElementById("questions-container");
    questionsContainer.innerHTML = "";
    
    currentTest.forEach((q, index) => {
        const div = document.createElement("div");
        div.className = "question";
        div.innerHTML = `
            <h3>${index + 1}. ${q.question}</h3>
            ${q.options.map((option, i) => `
                <div class="option">
                    <input type="radio" name="q${index}" value="${option}" id="q${index}_${i}" onclick="recordAnswer(${index}, '${option}')">
                    <label for="q${index}_${i}">${option}</label>
                </div>
            `).join("")}
        `;
        questionsContainer.appendChild(div);
    });
}

function recordAnswer(index, selectedAnswer) {
    answers[index] = selectedAnswer;
}

function shuffleTest() {
    currentTest = getRandomQuestions(getAllQuestions(), 30); // Shuffle the questions
    answers = new Array(currentTest.length).fill(null); // Reset answers
    renderQuestions();
}

function submitTest() {
    let score = 0;
    currentTest.forEach((q, index) => {
        if (answers[index] === q.answer) {
            score++;
        }
    });

    const resultContainer = document.getElementById("result-container");
    resultContainer.innerHTML = `Your score is: ${score} / ${currentTest.length}`;
    showAnswers();
}

function showAnswers() {
    const questionsContainer = document.getElementById("questions-container");
    const questionElements = questionsContainer.getElementsByClassName("question");

    for (let i = 0; i < questionElements.length; i++) {
        const questionElement = questionElements[i];
        const selectedAnswer = answers[i];
        const correctAnswer = currentTest[i].answer;

        if (selectedAnswer === correctAnswer) {
            questionElement.style.backgroundColor = 'lightgreen';
        } else {
            questionElement.style.backgroundColor = 'lightcoral';
        }
    }
}