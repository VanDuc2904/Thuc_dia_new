<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Water Quality Monitoring Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles_ta.css" />
</head>
<body>
<div class="page">
  <header>
    <div class="title-block">
      <h1>WATER QUALITY MONITORING SYSTEM</h1>
      <div class="badge-row">
        <!-- Overall system status -->
        <span class="tag status-ok" id="overall-status">
          <span class="tag-dot" id="overall-status-dot"></span>
          <span id="overall-status-text">System operating normally</span>
        </span>

        <!-- Active standard + selector -->
        <span class="tag tag-standard-main">
          <strong>Standard:</strong>
          <select id="standard-select" class="standard-select-inline">
            <option value="GND" selected>QCVN 09:2023/BTNMT – Groundwater</option>
            <!-- <option value="B1">QCVN 08-MT:2015 – B1 (Surface water)</option>
            <option value="B2">QCVN 08-MT:2015 – Column B2 (Surface water)</option>
            <option value="A1">QCVN 08-MT:2015 – Column A1 (Surface water)</option>
            <option value="A2">QCVN 08-MT:2015 – Column A2 (Surface water)</option>
            <option value="DW">QCVN 01:2009/BYT – Domestic water</option>-->
          </select>
        </span>
      </div>
    </div>

    <div class="header-meta">
      <div>System time: <strong id="system-time">--:--:--</strong></div>
      <div>Last update: <strong id="last-update">--:--:--</strong></div>
    </div>
  </header>

  <main>
    <!-- Top metrics cards -->
    <section class="card-grid">
      <!-- pH -->
      <article class="card">
        <div class="card-header">
          <div>
            <div class="param-name">pH</div>
            <div class="param-unit">Unitless</div>
          </div>
          <span class="status-chip status-good" data-status-for="pH">
            <span class="status-chip-dot"></span>
            <span>OK</span>
          </span>
        </div>
        <div class="param-value" data-value-for="pH">--</div>
        <div class="param-ref" data-ref-for="pH">
          Allowed range: 6.5 – 8.5
        </div>
        <div class="bar">
          <div class="bar-fill" data-bar-for="pH"></div>
        </div>
      </article>

      <!-- Temperature -->
      <article class="card">
        <div class="card-header">
          <div>
            <div class="param-name">TEMPERATURE</div>
            <div class="param-unit">°C</div>
          </div>
          <span class="status-chip status-good" data-status-for="temp">
            <span class="status-chip-dot"></span>
            <span>OK</span>
          </span>
        </div>
        <div class="param-value" data-value-for="temp">--</div>
        <div class="param-ref" data-ref-for="temp">
          Recommended: &lt; 32°C
        </div>
        <div class="bar">
          <div class="bar-fill" data-bar-for="temp"></div>
        </div>
      </article>

      <!-- Dissolved Oxygen (DO) -->
      <!--<article class="card">
        <div class="card-header">
          <div>
            <div class="param-name">DISSOLVED OXYGEN (DO)</div>
            <div class="param-unit">mg/L</div>
          </div>
          <span class="status-chip status-good" data-status-for="DO">
            <span class="status-chip-dot"></span>
            <span>OK</span>
          </span>
        </div>
        <div class="param-value" data-value-for="DO">--</div>
        <div class="param-ref" data-ref-for="DO">
          Allowed: ≥ 5 mg/L (for surface water)
        </div>
        <div class="bar">
          <div class="bar-fill" data-bar-for="DO"></div>
        </div>
      </article>-->

      <!-- Turbidity -->
      <article class="card">
        <div class="card-header">
          <div>
            <div class="param-name">TURBIDITY</div>
            <div class="param-unit">NTU</div>
          </div>
          <span class="status-chip status-good" data-status-for="turbidity">
            <span class="status-chip-dot"></span>
            <span>OK</span>
          </span>
        </div>
        <div class="param-value" data-value-for="turbidity">--</div>
        <div class="param-ref" data-ref-for="turbidity">
          Recommended: &lt; 5 NTU
        </div>
        <div class="bar">
          <div class="bar-fill" data-bar-for="turbidity"></div>
        </div>
      </article>

      <!-- TDS -->
      <article class="card">
        <div class="card-header">
          <div>
            <div class="param-name">TDS</div>
            <div class="param-unit">mg/L</div>
          </div>
          <span class="status-chip status-good" data-status-for="TDS">
            <span class="status-chip-dot"></span>
            <span>OK</span>
          </span>
        </div>
        <div class="param-value" data-value-for="TDS">--</div>
        <div class="param-ref" data-ref-for="TDS">
          Recommended: &lt; 1000 mg/L
        </div>
        <div class="bar">
          <div class="bar-fill" data-bar-for="TDS"></div>
        </div>
      </article>
    </section>

    <!-- Bottom layout: chart + table -->
    <section class="bottom-layout">
      <!-- Chart panel -->
      <section class="panel">
        <div class="panel-header">
          <div>
            <div class="panel-title">PARAMETER TREND OVER TIME</div>
            <div class="panel-sub">Real-time data from monitoring stations</div>
            <p class="panel-sub" style="margin-top:4px;">
              Observation date: <strong id="obs-date">--/--/----</strong>
            </p>
            <p class="panel-sub" id="active-station-label">
              Active station: <strong>Station 02 – Groundwater</strong>
            </p>
          </div>
          <div class="panel-controls">
            <span>Parameter:</span>
            <select id="chart-param-select">
              <option value="pH">pH</option>
              <option value="temp">Temperature</option>
              <option value="DO">Dissolved Oxygen (DO)</option>
              <option value="turbidity">Turbidity</option>
              <option value="TDS">TDS</option>
            </select>
          </div>
        </div>

        <!-- Short-term chart -->
        <div class="chart-wrapper">
          <canvas id="qualityChart"></canvas>
        </div>

        <!-- Multi-day chart -->
        <div class="panel-sub" style="margin-top: 0.75rem;">
          Multi-day timeline (date &amp; time)
        </div>
        <div class="chart-wrapper">
          <canvas id="multiDayChart"></canvas>
        </div>
      </section>

      <!-- Table panel -->
      <section class="panel">
        <div class="panel-header">
          <div>
            <div class="panel-title">LATEST DATA RECORDS</div>
            <div class="panel-sub">5–50 most recent records from the API</div>
          </div>
        </div>

        <div class="filter-row">
          <label>
            Station:
            <select id="station-select">
              <option value="station-02" selected>Station 02 – Groundwater</option>
              <option value="station-01">Station 01 – Surface water</option>
              <option value="station-03">Station 03 – Domestic water</option>
            </select>
          </label>
          <label>
            Date:
            <input type="date" id="date-filter" />
          </label>
          <label>
            Parameter:
            <select id="table-param-select">
              <option value="all">All parameters (combined)</option>
              <option value="pH">pH</option>
              <option value="temp">Temperature</option>
              <option value="DO">Dissolved Oxygen (DO)</option>
              <option value="turbidity">Turbidity</option>
              <option value="TDS">TDS</option>
            </select>
          </label>
        </div>

        <div style="max-height: 260px; overflow: auto; margin-top: 0.5rem;">
          <table>
            <thead>
            <tr>
              <th>Time</th>
              <th>Description</th>
              <th>Value</th>
              <th>Unit</th>
              <th>Standard</th>
              <th>Status</th>
            </tr>
            </thead>
            <tbody id="data-table-body">
            </tbody>
          </table>
        </div>
      </section>
    </section>
  </main>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script src="app_ta.js"></script>
</body>
</html>
